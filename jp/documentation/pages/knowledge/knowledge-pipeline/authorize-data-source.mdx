---
title: データソース認証
---

Difyは、多様な外部データソースへの接続をサポートしています。データの安全性とアクセス制御を確保するため、各データソースごとに適切な認証設定が必要です。Difyでは主に **APIキー** と **OAuth** の2つの認証方式を提供しており、安全に必要なデータへアクセス・インポートすることが可能です。

## データソース認証画面へのアクセス方法

Difyでは、以下の2つの方法でデータソースの認証設定にアクセスできます。

### I. ナレッジパイプラインの編集画面から

ナレッジパイプラインの編集画面で、認証が必要なデータソースノードを選択し、画面右側のパネルで **接続**（Connect）をクリックします。

![ナレッジパイプライン認証画面](/images/knowledge-base/authorize-data-1.PNG)

### II. 設定画面から

画面右上のアバターをクリックして **設定** を選択し、**データソース**に進み、認証したいデータソースを選択してください。

![設定画面の認証](/images/knowledge-base/authorize-data-2.PNG)

## 対応データソースと認証方式

| データソース      | APIキー | OAuth |
|-----------------|---------|-------|
| Notion          | ✅      | ✅    |
| Jina Reader     | ✅      |       |
| Firecrawl       | ✅      |       |
| Google Drive    |         | ✅    |
| Dropbox         |         | ✅    |
| OneDrive        |         | ✅    |

## 認証方式と設定の流れ

### APIキー認証

APIキー認証は、企業向けサービスや開発者ツールに適したキーベースの認証方式です。対応サービスの管理画面などでAPIキーを生成し、Difyに登録して設定を行います。

#### 設定手順

1. データソースの設定画面で、該当のデータソースを選択し、右側の **設定** をクリックして **APIキーを追加** を選びます。

   ![APIキー追加](/images/knowledge-base/authorize-data-3.PNG)

2. ポップアップで「認証名」と「APIキー」を入力し、**保存** をクリックして設定を完了します。

   ![APIキー設定](/images/knowledge-base/authorize-data-4.png)

APIキーは暗号化されて安全に保管されます。設定が成功すると「Connected」状態となり、ナレッジパイプライン内で該当データソース（例：Jina Reader）が利用可能になります。

![APIキー設定完了](/images/knowledge-base/authorize-data-6.png)

### OAuth認証

OAuthは、パスワードを開示せず、ユーザーが第三者アプリケーションに特定サービス上のリソースへのアクセスを許可できるオープンスタンダードの認証プロトコルです。

Difyでは、OAuth認証は**デフォルト設定**と**カスタム設定**の2種類を提供しています。

#### 設定手順

1. データソース設定画面でOAuth対応のデータソースを選択し、**設定** → **OAuthを追加** をクリックします。

   ![OAuth追加](/images/knowledge-base/authorize-data-7.png)

2. 権限範囲を確認し、**アクセスを許可** をクリックします。

   <div style={{display: 'flex', flexWrap: 'wrap', gap: '30px'}}>
      <div style={{flex: 1, minWidth: '300px'}}>
         ![OAuth権限確認](/images/knowledge-base/authorize-data-8.png)  
      </div>
      <div style={{flex: 1, minWidth: '300px'}}>
         ![アクセス許可](/images/knowledge-base/authorize-data-9.png)
      </div>
   </div>

#### OAuthクライアント設定

Difyでは、以下の2種類のOAuthクライアント設定方法を提供しています。

![OAuthクライアント設定](/images/knowledge-base/authorize-data-10.png)

<Tabs>
  <Tab title="デフォルト">
    SaaS版でのみ利用可能な方式です。Difyが事前に設定・管理するOAuthクライアントパラメータを用い、ワンクリックでOAuth認証情報を追加できます。追加の設定は不要です。
  </Tab>
  <Tab title="カスタム">
    Dify全バージョンで利用可能です。SaaS版でデフォルト設定のないデータソースや、企業のセキュリティポリシーやコンプライアンス要件に応じて、第三者プラットフォームでOAuthアプリを登録し、ご自身でクライアント情報を取得・管理します。
  </Tab>
</Tabs>

**カスタムOAuth設定手順**

1. データソース設定画面で該当データソースを選び、**設定** をクリック。**OAuthを追加** の右側にある **設定アイコン** を選択します。

   ![カスタムOAuth設定画面](/images/knowledge-base/authorize-data-11.png)

2. **カスタム** を選択し、**Client ID** と **Client Secret** を入力します。**保存して認証する**（Save and Authorize）をクリックして、OAuth認証を完了します。

   ![カスタムOAuth設定](/images/knowledge-base/authorize-data-12.png)
