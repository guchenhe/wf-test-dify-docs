---
title: "リスト演算子"
description: "配列から要素をフィルタリング、ソート、選択"
icon: "filter"
---

<Note> ⚠️ このドキュメントはAIによって自動翻訳されています。不正確な部分がある場合は、[英語版](/en/documentation/pages/nodes/list-operator)を参照してください。</Note>


リスト演算子ノードは、配列のフィルタリング、ソート、特定の要素の選択を行います。混合ファイルアップロード、大規模なデータセット、または下流処理の前に分離や整理が必要な配列データを扱う際に使用します。

<Frame caption="リスト演算子ノードインターフェース">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/522a0c932aab93d4f3970168412f759e.png" alt="リスト演算子インターフェース" />
</Frame>

## 配列処理の問題

ほとんどのワークフローノードは、配列ではなく単一の値を期待します。`[image.png, document.pdf, audio.mp3]`のような混合コンテンツが1つの変数に含まれている場合、これを下流ノードが効果的に処理できる専用のストリームに分離する必要があります。

リスト演算子はインテリジェントなルーターとして機能し、フィルターを使用して混合配列を分離し、専門的な処理のために準備します。

<Frame caption="配列処理ワークフローの例">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/812d1b2f167065e17df8392b2cb3cc8a.png" alt="配列処理の例" />
</Frame>

## サポートされるデータ型

ノードは適切なフィルタリングオプションを使用して、さまざまな配列タイプを処理します：

**Array[string]** - テキストリスト、カテゴリ、名前、または任意の文字列コレクション

**Array[number]** - 数値データ、スコア、測定値、または計算結果

**Array[file]** - 豊富なメタデータフィルタリング機能を持つ混合ファイルアップロード

## 操作

### フィルタリング

属性に基づいて特定のアイテムを抽出します。ファイル配列の場合、以下でフィルタリングできます：

<Tabs>
  <Tab title="コンテンツプロパティ">
    **タイプ** - コンテンツカテゴリでフィルタリング：画像、文書、音声、動画
    
    **MIMEタイプ** - 正確なコンテンツタイプの識別（image/jpeg、application/pdfなど）
    
    **拡張子** - ファイル拡張子（.pdf、.jpg、.mp3、.docxなど）
  </Tab>
  
  <Tab title="ファイルプロパティ">
    **サイズ** - 処理制限のためのファイルサイズ制約
    
    **名前** - ファイル名パターンまたは特定の名前
    
    **転送方法** - ローカルアップロードとURLベースのファイルを区別
  </Tab>
</Tabs>

### ソート

任意の属性でフィルタリング結果を整理します：

**昇順（ASC）** - 最小から最大の値、A-Zのアルファベット順

**降順（DESC）** - 最大から最小の値、Z-Aの逆順

### 選択

処理された配列から特定の要素を選択します：

**最初のN個を取得** - フィルタリングとソート後の最初の1～20個のアイテムを選択

**最初のレコード** - 最初にマッチした要素のみを単一の値として返す

**最後のレコード** - 最後にマッチした要素のみを単一の値として返す

## 出力変数

**result** - バルク処理用の完全なフィルタリングおよびソート済み配列

**first_record** - 先頭からの単一要素、「プテム選択に最適

**last_record** - 末尾からの単一要素、「最新」または「最終」選択に有用

## 混合ファイル処理の例

ユーザーが文書と画像の両方をアップロードするワークフローを処理します：

<Frame caption="混合ファイル処理ワークフロー">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/610358293217e54b55b7e1d4d16bf83c.png" alt="混合ファイル処理の例" />
</Frame>

**実装手順：**

1. **混合アップロードの設定** - 複数のファイルタイプを受け入れるファイルアップロード機能を有効化
2. **タイプ別に分割** - 異なるフィルターを持つ別々のリスト演算子ノードを使用：
   - `type = "image"`でフィルタリング → ビジョン機能を持つ大規模言語モデルにルーティング
   - `type = "document"`でフィルタリング → 文書抽出器にルーティング
3. **適切に処理** - 画像は直接分析され、文書はテキスト抽出が行われる
4. **結果を結合** - 処理された出力を統一されたレスポンスにマージ

このパターンは、異なるファイルタイプを適切なプロセッサーに自動的にルーティングし、シームレスなマルチモーダルユーザーエクスペリエンスを作成します。

## 一般的な使用例

**ファイルタイプルーティング** - 混合アップロードをコンテンツタイプに基づいて専門的な処理パイプラインに分離

**データフィルタリング** - 特定の基準に基づいて大規模なデータセットから関連するサブセットを抽出

**コンテンツ優先順位付け** - コレクションから最も重要または最新のアイテムをソートして選択

**品質管理** - 処理前に無効、過大サイズ、またはサポートされていないコンテンツをフィルターで除外

**バッチ準備** - 下流の反復処理や並列処理のためにデータを管理可能なチャンクに整理

## ベストプラクティス

**フィルター基準の計画** - 下流処理要件に基づいて明確なフィルタリングルールを定義

**適切な出力タイプの使用** - 下流ノードがデータをどのように使用するかに基づいて、完全な配列、最初のレコード、または最後のレコードを選択

**空の結果の処理** - フィルターが一致しない場合の対処法を検討し、適切なフォールバックロジックを計画

**実データでのテスト** - 本番環境での信頼性のある動作を保証するために、実際のユーザーアップロードでフィルタリング動作を検証
