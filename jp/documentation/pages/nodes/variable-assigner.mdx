---
title: "変数アサイナー"
description: "チャットフローアプリケーションで永続的な会話変数を管理"
icon: "pen-to-square"
---

<Note> ⚠️ このドキュメントはAIによって自動翻訳されています。不正確な部分がある場合は、[英語版](/en/documentation/pages/nodes/variable-assigner)を参照してください。</Note>


変数アサイナーノードは、会話変数への書き込みによってチャットフローアプリケーションの永続的なデータを管理します。各実行でリセットされる通常のワークフロー変数とは異なり、会話変数はチャットセッション全体を通じて持続します。

<Frame caption="変数アサイナーノードの設定">
  <img src="https://assets-docs.dify.ai/2024/11/83d0b9ef4c1fad947b124398d472d656.png" alt="変数アサイナーのインターフェース" />
</Frame>

## 会話変数 vs ワークフロー変数

**ワークフロー変数**は単一のワークフロー実行中のみ存在し、ワークフローが完了するとリセットされます。

**会話変数**は同じチャットセッション内の複数の会話ターンにわたって持続し、ステートフルなインタラクションと文脈的なメモリを可能にします。

この持続性により、文脈的な会話、ユーザーのパーソナライゼーション、ステートフルなワークフロー、複数のユーザーインタラクションにわたる進捗追跡が可能になります。

## 設定

どの会話変数を更新するかを設定し、そのソースデータを指定します。単一のノードで複数の変数を割り当てることができます。

<Frame caption="変数割り当て設定インターフェース">
  <img src="https://assets-docs.dify.ai/2024/11/ee15dee864107ba5a93b459ebdfc32cf.png" alt="変数割り当ての設定" />
</Frame>

**変数** - 書き込む会話変数を選択

**変数設定** - 上流のワークフローノードからソースデータを選択

**操作モード** - 変数の更新方法を決定（上書き、追加、クリアなど）

## 操作モード

異なる変数タイプは、そのデータ構造に基づいて異なる操作をサポートします：

<Tabs>
  <Tab title="文字列変数">
    **上書き** - 文字列値全体を新しいコンテンツで置き換える
    
    **クリア** - 変数を空にし、nullまたは空白に設定する
    
    **設定** - 固定値を手動で入力する
  </Tab>
  
  <Tab title="数値変数">
    **上書き** - 数値を完全に置き換える
    
    **クリア** - nullまたは空の状態に設定する
    
    **設定** - 特定の数値を手動で入力する
    
    **算術演算** - 現在の値に対して加算、減算、乗算、除算を行う
  </Tab>
  
  <Tab title="オブジェクト変数">
    **上書き** - オブジェクト全体を新しいデータで置き換える
    
    **クリア** - オブジェクトを空にし、すべてのプロパティを削除する
    
    **設定** - オブジェクトの構造と値を手動で定義する
  </Tab>
  
  <Tab title="配列変数">
    **上書き** - 配列全体を新しいデータで置き換える
    
    **クリア** - 配列を空にし、すべての要素を削除する
    
    **追加** - 配列の最後に1つの項目を追加する
    
    **拡張** - 他の配列から複数の項目を追加する
    
    **削除** - 最初または最後の位置から項目を削除する
  </Tab>
</Tabs>

配列操作は、時間の経過とともに成長するメモリシステム、チェックリスト、会話履歴の構築において特に強力です。

## 一般的な実装パターン

### スマートメモリシステム

会話から重要な情報を自動的に検出・

<Frame caption="スマートメモリシステムワークフロー">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/8d0492814b1515f50e87b2900ff400db.png" alt="スマートメモリの実装" />
</Frame>

システムはユーザー入力を記憶すべき事実について分析し、構造化された情報を抽出し、今後の会話で参照するために永続的なメモリ配列に追加します。

### ユーザー設定の保存

言語設定、通知設定、表示オプションなどのユーザー設定を保存：

<Frame caption="ユーザー設定の管理">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/1867d608a7d009431b73377ed65b427b.png" alt="ユーザー設定ワークフロー" />
</Frame>

**上書き**モードを使用してユーザー入力から初期設定をキャプチャし、パーソナライズされたインタラクションのために後続のすべての大規模言語モデルレスポンスでそれらを参照します。

### 段階的チェックリスト

複数の会話ターンにわたって完了状況を追跡するガイド付きワークフローの構築：

<Frame caption="段階的チェックリストの実装">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/c4362b01298b12e7d6fcd9e798f3165a.png" alt="段階的チェックリストワークフロー" />
</Frame>

配列会話変数を使用して完了した項目を追跡します。変数アサイナーは各ターンでチェックリストを更新し、大規模言語モデルはそれを参照してユーザーを残りのタスクを通じてガイドします。

## ベストプラクティス

**適切なデータタイプを選択** - 成長するコレクションには配列を、構造化データにはオブジェクトを、単一値には単純型を使用する。

**説明的な変数名を使用** - 会話変数の目的と内容を示すように明確に命名する。

**データの成長を処理** - 長い会話での過度なメモリ使用を防ぐため、配列とオブジェクトのサイズを監視する。

**変数を初期化** - 未定義の動作を防ぐため、会話変数に初期値を設定する。

**適切な場合にクリア** - 新しいプロセスやセッションを開始する際に変数をリセットするためにクリア操作を使用する。
