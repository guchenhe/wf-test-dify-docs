---
title: AWS上のDify Premium
---

<Note> ⚠️ このドキュメントはAIによって自動翻訳されています。不正確な部分がある場合は、[英語版](/en/self-hosting/platform-guides/dify-premium)を参照してください。</Note>

Dify Premiumは、カスタムブランディングを可能にし、EC2としてAWS VPCにワンクリックでデプロイできるAWS AMIサービスです。[AWS Marketplace](https://aws.amazon.com/marketplace/pp/prodview-t22mebxzwjhu6)にアクセスして購読してください。以下のようなシナリオで有用です：

* 中小企業として1つまたは少数のアプリケーションを作成したく、データレジデンシーを重視している。
* [Dify Cloud](https://cloud.dify.ai)に興味があるが、あなたのユースケースが[プラン](https://dify.ai/pricing)でサポートされているよりも多くのリソースを必要とする。
* 組織内でDify Enterpriseを採用する前にPOCを実行したい。

## セットアップ

初めてDifyにアクセスする場合は、Admin初期化パスワード（EC2のインスタンスIDに設定）を入力してセットアップ処理を開始します。

AMIがデプロイされた後、EC2コンソールで見つけたインスタンスのパブリックIPを通じてDifyにアクセスします（デフォルトではHTTPポート80を使用）。

## アップグレード

EC2インスタンスで、以下のコマンドを実行します：

```
git clone https://github.com/langgenius/dify.git /tmp/dify
mv -f /tmp/dify/docker/* /dify/
rm -rf /tmp/dify
docker-compose down
docker-compose pull
docker-compose -f docker-compose.yaml -f docker-compose.override.yaml up -d
```

<Accordion title="Community Editionをv1.0.0+にアップグレード">

> このセクションでは、古いCommunity EditionをDify v1.0.0+に移行する方法を説明します。この特定の移行範囲*より後*のバージョンへのDify PremiumまたはCommunity Editionの一般的なアップグレードについては、それぞれのメインアップグレード手順を参照してください。

アップグレードプロセスには以下のステップが含まれます：

1. データのバックアップ
2. プラグインの移行
3. メインのdifyプロジェクトのアップグレード

### 1. データのバックアップ

1.1 `cd`コマンドを実行してDifyプロジェクトディレクトリに移動し、バックアップブランチを作成します。

1.2 以下のコマンドを実行してdocker-compose YAMLファイルをバックアップします（オプション）。

```bash
cd docker
cp docker-compose.yaml docker-compose.yaml.$(date +%s).bak
```

1.3 コマンドを実行してdockerサービスを停止し、Dockerディレクトリでバックアップデータコマンドを実行します。

```bash
docker compose down
tar -cvf volumes-$(date +%s).tgz volumes
```

### 2. バージョンのアップグレcker Composeによるデプロイをサポートしています。Difyプロジェクトパスに移動し、以下のコマンドを実行してDifyバージョンにアップグレードします：

```bash
git checkout 1.0.0 # 1.0.0ブランチに切り替え
cd docker
docker compose -f docker-compose.yaml up -d
```

### 3. ツールをプラグインに移行

> **コマンド実行とパッケージ管理に関する重要な注意（v1.0.0移行用）：**
> *   **デフォルトコンテナ名：** `docker exec`コマンドの例では`docker-api-1`を使用しています。APIコンテナが異なる名前またはID（`docker ps`を使用して確認可能）を持つ場合は、それに応じてコマンドを調整してください。
> *   **Pythonパッケージマネージャー（`uv` vs. `poetry`）：**
    *   Difyは、パフォーマンス向上のためにバージョン[v1.3.0](https://github.com/langgenius/dify/releases/tag/1.3.0)からPythonパッケージ管理を`poetry`から`uv`に切り替えました。Dify v1.3.0以降の一般的な操作では、標準コマンドは`uv run flask ...`です。
    *   **このセクションはDify v1.0.0へのアップグレードに焦点を当てています。** Dify v1.0.0からv1.3.0未満までの期間では、`poetry`がパッケージマネージャーでした。したがって、以下の例の`flask`コマンドは正しく`poetry run ...`を使用しています。コードの例では、コメントで現在の`uv`標準を最初に強調し、次にこの特定のv1.0.0移行範囲に関連する`poetry`コマンドを示します。

このステップの目的は、以前にCommunity Editionで使用されていたツールとモデルベンダーを自動的に移行し、新しいプラグイン環境にインストールすることです。

1.	`docker ps`コマンドを実行してAPIコンテナ名またはIDを確認します。デフォルトは多くの場合`docker-api-1`です。

例：

```bash
docker ps
CONTAINER ID   IMAGE                                       COMMAND                  CREATED       STATUS                 PORTS                                                                                                                             NAMES
417241cd****   nginx:latest                                "sh -c 'cp /docker-e…"   3 hours ago   Up 3 hours             0.0.0.0:80->80/tcp, :::80->80/tcp, 0.0.0.0:443->443/tcp, :::443->443/tcp                                                          docker-nginx-1
f84aa773****   langgenius/dify-api:1.0.0                   "/bin/bash /entrypoi…"   3 hours ago   Up 3 hours             5001/tcp                                                                                                                          docker-worker-1
a3cb19c2****   langgenius/dify-api:1.0.0                   "/bin/bash /entrypoi…"   3 hours ago   Up 3 hours             5001/tcp                                                                                                                          docker-api-1
```

コマンド`docker exec -it docker-api-1 bash`を実行してコンテナターミナルに入り（コンテナ名が異なる場合はそれを使用）、次に実行します：

```bash
# Dify v1.3.0+環境では、標準コマンドは'uv run ...'です。
uv run flask extract-plugins --workers=20
#
# ゲット移行バージョンがDify v1.0.0からv1.3.0未満の場合は、'poetry'を使用してください：
# poetry run flask extract-plugins --workers=20
```

> v1.0.0移行用のこのガイドに従ってコマンドを実行しようとする際にエラーが発生した場合（例：`uv`または`poetry`が見つからない）、そのバージョンの元の前提条件に従って`poetry`環境がサーバー上で正しく設定されていることを確認してください。`poetry`コマンドの実行後にターミナルで入力を求められた場合は、**「Enter」**を押してスキップしてください。

このコマンドは、現在環境で使用中のすべてのモデルとツールを抽出します。workersパラメータは抽出中に使用される並列プロセス数を制御し、必要に応じて調整できます。コマンド実行後、現在のDifyインスタンス内のすべてのワークスペース用のプラグイン情報を含む`plugins.jsonl`ファイルが生成されます。

ネットワークがパブリックインターネットにアクセスでき、`https://marketplace.dify.ai`へのアクセスをサポートしていることを確認してください。`docker-api-1`コンテナ内で以下のコマンドを続けて実行します：

```bash
# Dify v1.3.0+環境では、標準コマンドは'uv run ...'です。
uv run flask install-plugins --workers=2
#
# ここで説明するCommunity Edition部分のターゲット移行バージョンがDify v1.0.0からv1.3.0未満の場合は、'poetry'を使用してください：
# poetry run flask install-plugins --workers=2
```

このコマンドは、必要なすべてのプラグインを最新のCommunity Editionにダウンロードしてインストールします。ターミナルに`Install plugins completed.`が表示されると、移行が完了します。

</Accordion>

## カスタマイズ

セルフホストデプロイと同様に、EC2インスタンス内の`.env`の環境変数を必要に応じて変更できます。その後、以下でDifyを再起動します：

```bash
docker-compose down
docker-compose -f docker-compose.yaml -f docker-compose.override.yaml up -d
```

## WebAppロゴ & ブランディングのカスタマイズ

設定の**カスタマイズ**でこの機能を有効にし、**Remove Powered by Dify**を有効にして独自のロゴをアップロードできます。
