---
title: よくある問題
---

<Note> ⚠️ このドキュメントはAIによって自動翻訳されています。不正確な部分がある場合は、[英語版](/en/self-hosting/troubleshooting/common-issues)を参照してください。</Note>

## 認証とアクセス

### 管理者パスワードのリセット

Docker Composeデプロイメントの場合：

```bash
docker exec -it docker-api-1 flask reset-password
```

プロンプトが表示されたら、アカウントのメールアドレスと新しいパスワードを入力してください。

ソースコードデプロイメントの場合は、`api`ディレクトリから同じコマンドを実行してください。

### ログイン後の401エラー

これは通常、ドメインを変更した後に発生します。以下の環境変数を更新してください：

- `CONSOLE_CORS_ALLOW_ORIGINS` - コンソールCORSポリシー
- `WEB_API_CORS_ALLOW_ORIGINS` - WebアプリCORSポリシー
- `CONSOLE_API_URL` - コンソールAPIのバックエンドURL
- `CONSOLE_WEB_URL` - コンソールWebのフロントエンドURL
- `SERVICE_API_URL` - サービスAPI URL
- `APP_API_URL` - WebアプリAPIバックエンドURL
- `APP_WEB_URL` - WebアプリURL

設定を更新した後、再起動してください。

## 設定

### デフォルトポートの変更

`.env`設定を変更してください：

```
EXPOSE_NGINX_PORT=80
EXPOSE_NGINX_SSL_PORT=443
```

APIサービスポートを変更する場合は、`docker-compose.yaml`のnginx設定を更新してください。

### ファイルアップロード制限の増加

`.env`で以下を更新してください：

- `UPLOAD_FILE_SIZE_LIMIT` - 最大ファイルサイズ
- `NGINX_CLIENT_MAX_BODY_SIZE` - 問題を避けるために一致させる必要があります

### ワークフローの複雑さ制限

`web/app/components/workflow/constants.ts`の`MAX_TREE_DEPTH`を調整してください（デフォルト：50）。

注意：過度な深度はパフォーマンスに影響します。

### ノード実行タイムアウト

ノードごとの実行時間を制御するために、`.env`で`TEXT_GENERATION_TIMEOUT_MS`を設定してください。

## メール設定

パスワードリセットメールが届きませんか？`.env`でメール設定を構成してください：

1. メールパラメータを設定（SMTP設定）
2. サービスを再起動：

```bash
docker compose down
docker compose up -d
```

メールがまだ届かない場合は、迷惑メールフォルダを確認してください。

### メールサービスなしでメンバーを招待

メールが設定されていないローカルデプロイメントでは、招待ページは送信後にリンクを表示します。このリンクをコピーして手動でユーザーに転送してください。

## データベースの問題

### pg_hba.confでの接続エラー

以下のエラーが表示される場合：
```
FATAL: no pg_hba.conf entry for host "172.19.0.7", user "postgres", database "dify", no encryption
```

エラーのネットワークセグメントit docker-db-1 sh -c "echo 'host all all 172.19.0.0/16 trust' >> /var/lib/postgresql/data/pgdata/pg_hba.conf"
docker-compose restart
```

### 暗号化キーのファイルが見つからないエラー

このエラーは、デプロイメント方法を変更した後、または`api/storage/privkeys`を削除した後に発生します：

```
FileNotFoundError: File not found
File "/www/wwwroot/dify/dify/api/libs/rsa.py", line 45, in decrypt
```

暗号化キーペアをリセットしてください：

Docker Compose：
```bash
docker exec -it docker-api-1 flask reset-encrypt-key-pair
```

ソースコード（`api`ディレクトリから）：
```bash
flask reset-encrypt-key-pair
```

**警告**：これは元に戻せません - 既存の暗号化データは失われます。

## ワークスペース管理

### ワークスペース名の変更

データベース内の`tenants`テーブルを直接変更してください。

### アプリケーションアクセスドメインの変更

`docker-compose.yaml`で`APP_WEB_URL`を更新してください。
