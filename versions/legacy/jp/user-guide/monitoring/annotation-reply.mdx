---
title: アノテーションリプライ
version: '日本語'
---

アノテーションリプライ機能は、手動編集されたアノテーションを通じて、アプリケーションにカスタマイズされた高品質なQ&Aリプライ能力を提供します。

適用シーン：

* **特定分野のカスタマイズ回答：** 企業や政府などのカスタマーサービスやナレッジベースQ&Aのシーンで、特定の問題に対してシステムが明確な結果を提供することを望む場合、特定の問題についてカスタマイズされた出力結果が必要です。例えば、特定の問題に対する「標準回答」や、特定の問題に対する「回答不可」の設定などが挙げられます。
* **POCやデモ製品の迅速なチューニング：** プロトタイプ製品を迅速に構築する際に、アノテーションリプライを通じて実現されたカスタマイズ回答は、Q&Aの生成結果の予期を効率的に向上させ、顧客満足度を高めることができます。

アノテーションリプライ機能は、LLM (大規模言語モデル) の生成プロセスをスキップし、RAG (Retrieval-Augmented Generation) のハルシネーション問題を回避するための別の検索強化システムを提供するものです。

### 使用プロセス

1. アノテーションリプライ機能を有効にすると、LLMの会話リプライ内容に対してアノテーションを行うことができます。LLMがリプライした高品質な回答を直接アノテーションとして追加することもできますし、必要に応じて高品質な回答を手動で編集することもできます。これらの編集されたアノテーション内容は永続保存されます。
2. ユーザーが再度類似の質問をした場合、その質問をベクトル化し、類似するアノテーションをクエリします。
3. マッチング項目が見つかった場合、そのアノテーションに対応する回答を直接返し、LLMやRAGのプロセスを経由せずにリプライします。
4. マッチング項目が見つからなかった場合、質問は通常プロセスを継続します（LLMやRAGに渡されます）。
5. アノテーションリプライ機能をオフにすると、システムはアノテーションからのマッチングリプライを行いません。

<Frame caption="アノテーションリプライの流れ">
  <img src="/ja-jp/img/image (130).png" alt="标注回复流程" width="563" />
</Frame>

### プロンプト編成でアノテーションリプライを有効にする

「アプリケーション構築->機能追加」からアノテーションリプライのスイッチを有効にします：

<Frame caption="プロンプト編成でアノテーションリプライを有効にする">
  <img src="/ja-jp/img/annotated-replies.png" alt="プロンプト編成でアノテーションリプライを有効にする" />
</Frame>

有効にする際には、まずアノテーションリプライのパラメータを設定する必要があります。設定可能なパラメータには次のものがあります：スコア閾値とEmbeddingモデル

**スコア閾値**：アノテーションリプライのマッチング類似度閾値を設定するために使用されます。閾値スコアを超えるアノテーションのみがリコールされます。

**Embeddingモデル**：アノテーションテキストをベクトル化するために使用され、モデルの切り替え時には再度埋め込みが生成されます。

保存して有効にすると、この設定は直ちに有効となり、システムはすべての保存されたアノテーションに対してEmbeddingモデルを利用して埋め込みを生成し保存します。

<Frame caption="アノテーションリプライのパラメータ設定">
  <img src="/ja-jp/img/setting-parameters-for-annotated-replies.png" alt="アノテーションリプライのパラメータ設定" />
</Frame>

### 会話デバッグページでアノテーションを追加する

デバッグおよびプレビューページでモデルのリプライ情報に直接アノテーションを追加または編集できます。

<Frame caption="アノテーションリプライを追加する">
  <img src="/ja-jp/img/add-annotation-reply.png" alt="アノテーションリプライを追加する" />
</Frame>

必要なアノテーションリプライに編集して保存します。

<Frame caption="アノテーションリプライを編集する">
  <img src="/ja-jp/img/editing-annotated-replies.png" alt="アノテーションリプライを編集する" />
</Frame>

同じ質問を再度入力すると、システムは既に保存されたアノテーションを使用して質問に直接リプライします。

<Frame caption="保存されたアノテーションを通じてユーザー質問にリプライする">
  <img src="/ja-jp/img/annotaiton-reply.png" alt="保存されたアノテーションを通じてユーザー質問にリプライする" />
</Frame>

### ログとアノテーションでアノテーションリプライを有効にする

「アプリケーション構築->ログとアノテーション->アノテーション」からアノテーションリプライのスイッチを有効にします：

<Frame caption="ログとアノテーションでアノテーションリプライを有効にする">
  <img src="/ja-jp/img/logs-annotation-switch.png" alt="ログとアノテーションでアノテーションリプライを有効にする" />
</Frame>

### アノテーションバックエンドでアノテーションリプライのパラメータを設定する

アノテーションリプライで設定可能なパラメータには次のものがあります：スコア閾値と埋め込みモデル

**スコア閾値**：アノテーションリプライのマッチング類似度閾値を設定するために使用されます。閾値スコアを超えるアノテーションのみがリコールされます。

**埋め込みモデル**：アノテーションテキストをベクトル化するために使用され、モデルの切り替え時には再度埋め込みが生成されます。

<Frame caption="アノテーションリプライのパラメータを設定する">
  <img src="/ja-jp/img/annotated-replies-initial.png" alt="アノテーションリプライのパラメータを設定する" />
</Frame>

### アノテーションQ&Aペアを一括インポートする

一括インポート機能内で、アノテーションインポートテンプレートをダウンロードし、テンプレート形式に従ってアノテーションQ&Aペアを編集します。編集が完了したら、一括インポートできます。

<Frame caption="アノテーションQ&Aペアを一括インポートする">
  <img src="/ja-jp/img/bulk-import-annotated.png" alt="アノテーションQ&Aペアを一括インポートする" />
</Frame>

### アノテーションQ&Aペアを一括エクスポートする

アノテーション一括エクスポート機能を通じて、システム内に保存されたすべてのアノテーションQ&Aペアを一度にエクスポートできます。

<Frame caption="アノテーションQ&Aペアを一括エクスポートする">
  <img src="/ja-jp/img/bulk-export-annotations.png" alt="アノテーションQ&Aペアを一括エクスポートする" />
</Frame>

### アノテーションリプライのヒット履歴を確認する

アノテーションヒット履歴機能内で、すべてのヒットしたアノテーションの編集履歴、ヒットしたユーザー質問、リプライ回答、ヒットソース、マッチング類似度スコア、ヒット時間などの情報を確認できます。これらのシステム情報に基づいて、アノテーション内容を継続的に改善することができます。

<Frame caption="アノテーションリプライのヒット履歴を確認する">
  <img src="/ja-jp/img/view-annotation-hit-history.png" alt="アノテーションリプライのヒット履歴を確認する" />
</Frame>
